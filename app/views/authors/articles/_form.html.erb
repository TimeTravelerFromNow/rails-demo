<div class="flex-row d-flex justify-content-center">

  <div class="col-md-8">
 <div class="card">


   <div class="card-body">

     <%= form_with model: @article do |form| %>

       <div class= "form-group">

   <%= form.label :title %><br>
   <%= form.text_field :title, class: 'form-control'%>
   <% article.errors.full_messages_for(:title).each do |message| %>
   <div><%= message %></div>
 <% end %>

  </div>

  <div class="form-group">

    <%= form.label :body %><br>
    <%= form.text_area :body, class: 'form-control'%>
   <% article.errors.full_messages_for(:body).each do |message| %>
   <div><%= message %></div>
 <% end %>

  </div>

  <div class="form-group">
    <%= form.label :header_image %>
    <%= form.file_field :header_image, class: 'form-control' %>
    <% if article.header_image.present? %>
      <small>current image:</small>
      <%= image_tag(article.header_image , width: '100%') %>
    <% end %>
  </div>

  <div class="form-group">
    <%= form.label :status %><br>
    <%= form.select :status, ['public','private','archived'], selected: 'public'%>
  </div>

  <%= form.submit "Submit", class: "btn btn-outline-primary"%>
  <%= link_to "Back", articles_path, class: 'btn btn-outline-secondary'%>
  <% if article.id? %>
  <%= link_to "Delete", article_path(article), data: { turbo_method: :delete, turbo_confirm: "Are you sure?"} %>

  <div class="col-md-9">
    <div class="mb-3">

      <%= form_with(model: [@article, @paragraph]) do |form| %>
        <%= form.hidden_field :element_type, value: 'paragraph' %>
        <%= form.submit "Paragraph", class: 'btn btn-primary' %>
      <% end %>
    </div>
  <% @article.elements.each do |element| %>
    <% if element.persisted? %>
      <%= form_with(model: [@article, element]) do |form| %>
          <%= form.rich_text_area :content %>
          <%= form.submit "Save", class: 'btn btn-primary' %>
        <% end %>
    <% end %>
  <% end %>
  </div>
    <% end %>
<% end %>


  </div>

  </div>
 </div>
